<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GEDCOM 5.5.5 Date Grammar Expanded</title>
    <style>
        body { font-family: 'Courier New', Courier, monospace; line-height: 1.6; padding: 20px; background-color: #f4f7f6; }
        h1 { color: #2c3e50; border-bottom: 3px solid #16a085; padding-bottom: 10px; }
        .grammar-rule { 
            background: #ffffff; 
            border: 1px solid #d1d8e0;
            border-left: 6px solid #16a085; 
            padding: 15px; 
            margin-bottom: 15px; 
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .rule-id { font-weight: bold; color: #2c3e50; display: block; margin-bottom: 8px; font-size: 1.1em; }
        .expression { color: #2980b9; white-space: pre-wrap; font-weight: bold; }
        .comment { color: #7f8c8d; font-style: italic; font-size: 0.9em; margin-top: 10px; display: block; }
        .metadata { color: #e67e22; font-weight: normal; font-size: 0.9em; }
    </style>
</head>
<body>
    <h1>GEDCOM 5.5.5 Date Grammar (Corrected & Expanded)</h1>

    <div id="rule-date-value" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=1:255}</span> DATE_VALUE:=</span>
        <span class="expression">[ &lt;DATE&gt; | &lt;DATE_PERIOD&gt; | &lt;DATE_RANGE&gt; | &lt;DATE_APPROXIMATED&gt; | &lt;DATE_INT&gt; | &lt;DATE_PHRASE&gt; ]</span>
        <span class="comment">The high-level container for any date value used in a GEDCOM tag (e.g., BIRT.DATE).</span>
    </div>

    <div id="rule-date-greg" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=4:35}</span> DATE_GREG:=</span>
        <span class="expression">[ &lt;YEAR&gt; | &lt;MONTH&gt; + space + &lt;YEAR&gt; | &lt;DAY&gt; + space + &lt;MONTH&gt; + space + &lt;YEAR&gt; | 
  &lt;DAY&gt; + space + &lt;MONTH&gt; + space + &lt;DUAL_STYLE_YEAR&gt; ]</span>
        <span class="comment">Updated: Now explicitly allows Dual Style Years to accommodate the Gregorian transition period.</span>
    </div>

    <div id="rule-dual-style-year" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=7:9}</span> DUAL_STYLE_YEAR:=</span>
        <span class="expression">&lt;YEAR&gt; + / + &lt;DIGIT&gt;&lt;DIGIT&gt;</span>
        <span class="comment">Represents Old Style/New Style transition years (e.g., 1751/52).</span>
    </div>

    <div id="rule-date-period" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=7:75}</span> DATE_PERIOD:=</span>
        <span class="expression">[ FROM + space + &lt;DATE&gt; | 
  TO + space + &lt;DATE&gt; | 
  FROM + space + &lt;DATE&gt; + space + TO + space + &lt;DATE&gt; ]</span>
        <span class="comment">Represents a period of time with a start and/or an end (e.g., "FROM 1900 TO 1910").</span>
    </div>

    <div id="rule-date-range" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=8:75}</span> DATE_RANGE:=</span>
        <span class="expression">[ BEF + space + &lt;DATE&gt; | 
  AFT + space + &lt;DATE&gt; | 
  BET + space + &lt;DATE&gt; + space + AND + space + &lt;DATE&gt; ]</span>
        <span class="comment">Represents a point in time known to be within a range (e.g., "BET 1850 AND 1860").</span>
    </div>

    <div id="rule-date-phrase" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=3:255}</span> DATE_PHRASE:=</span>
        <span class="expression">( + &lt;TEXT&gt; + )</span>
        <span class="comment">Any string of text enclosed in parentheses. Used when a date cannot be expressed in a formal GEDCOM format.</span>
    </div>

    <div id="rule-date-int" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=10:255}</span> DATE_INT:=</span>
        <span class="expression">INT + space + &lt;DATE&gt; + space + ( + &lt;TEXT&gt; + )</span>
        <span class="comment">Interpreted date: A formal date followed by the original text from which it was derived.</span>
    </div>

    <div id="rule-date-calendar-escape" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=9:11}</span> DATE_CALENDAR_ESCAPE:=</span>
        <span class="expression">[ @#DHEBREW@ | @#DFRENCH R@ | @#DGREGORIAN@ | @#DJULIAN@ | @#DUNKNOWN@ ]</span>
    </div>

    <div id="rule-date" class="grammar-rule">
        <span class="rule-id"><span class="metadata">{Size=4:35}</span> DATE:=</span>
        <span class="expression">[ &lt;DATE_CALENDAR&gt; | &lt;DATE_CALENDAR_ESCAPE&gt; + space + &lt;DATE_CALENDAR&gt; ]</span>
    </div>

</body>
</html>