We anticipate an eventual need for family to work on platforms other
than Linux, and so at some stage we need to give some thought to how
to build the application on systems like Windows, macOS X, and possibly
iOS (for tablets) or Android (ditto). Tablets are perhaps pushing the
envelope a bit because they don't have a three-button mouse, but it
is worth thinking about that possibility before wading too far into
portability (is there a version of FLTK that is adapted for touch screen?).
Possibly iOS is so Tivo-ised that you can't just compile and install
your own programs anyway, in which case it is not worth considering.

Perhaps the first question to ask any potential user is "how many
self-compiled programs do you use ?" and answers less than one will
get "Well, there is no support for you, then". Sorry, Doc, but I am
not investing hours in trying to bludgeon code onto a system that
really doesn't wish me to.

So first we need to understand our prerequisites and build process.
Obvously we use the Gnu compiler, and since the system is known to
build with that, there is every reason to avoid change. We build
from the command line and want to avoid gratuitous complications
like an IDE or anything that only runs on desktop. Currently we
have a manually built Makefile. This has locations of stuff hard
coded in, and will not port. The choices here are to use a traditional
./configure step, or CMake to generate a Makefile for the local
environment. Since I understand neither, there is a learning curve.
All recommendations point at CMake as the way to go, since it keeps
configuration for different platforms quite separate which avoids
cross-contamination. So far, attempts to use cmake are failing with
an issue in the PNG library which suggests that the code to link is
not being adequately specified somewhere.

On rawthey (focal) we have fltk 1.3.4 installed and all works fine.
A test on glaslyn with Kubuntu jammy shows all is OK with fltk 1.3.8
as well. Thus, we are pretty sure we're using an fltk 1.3 variant, not
the older fltk 1.1 series, which is good.

-----------------------------------------------------------------------------

Raspberry Pi. In theory we could run the original !Family on a modern
RISC OS, but more practically, there should be no issue at all porting to
Raspbian.

-----------------------------------------------------------------------------

I can't run Mac OS X in a VM, so we have three choices:

1) Some sort of cross-compile toolchain to run on Linux
2) Install toolchain on the old Mac and hope binaries will
run on newer ones
3) Install toolchain on Mary's current Mac.

I am not aware that (1) is actually possible, which is a shame, as that
would be entirely my preference. Supposedly, it is possible, using Clang
and other LLVM components, but it does seem fraught with issues.

(2) is next best if the binaries are standalone and will run on any Mac
without the target needing to install fltk as a shared library - we would
prefer to ship a single package that will run anywhere and survive system
upgrades without recompiling. The issue here is that we may no longer be able
to get the toolchain to install on the old Mac - Apple are really crap at
supporting older versions or even making it possible to get hold of them.
So you'd end up doing a full install of the homebrew edifice (does that still
depend on XTools ?).

(3) is the worst case - if we have to compile locally for Mary, we are
effectively admitting that we will have to expect any end-user to compile.
Clearly, Survex doesn't do that so I am hopeful this is avoidable.

Static linking is going to be key.

-----------------------------------------------------------------------------

I can run Windows in a VM, but don't necessarily have recent versions -
I do have XP, and possibly some licensed Windows more recent than that
on hard discs (or images thereof) removed from machines on which it
was never allowed to boot (so could theoretically be installed in a
VM, but in practice may have been customised for the hardware on which
it was originally installed). Whatever else, it is probably essential
to be compiling for a 64-bit platform.

There is supposed to be a cross-compilig solution for Linux, but, as for
OS X, it is fairly arcane.

-----------------------------------------------------------------------------

Android

Well, we are supposed to be able to set up an X server under Termux and the
usual route for building Android stuff is cross-compiling, so in principle
this is doable. The issue is FLTK support and touch-screen compatability.

-----------------------------------------------------------------------------

iOS

This is looking like a non-starter

